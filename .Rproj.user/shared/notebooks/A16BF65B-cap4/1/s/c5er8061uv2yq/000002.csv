"0","library(sp)"
"0","library(rgdal)"
"0","library(leaflet)"
"0","library(htmltools)"
"0","library(htmlwidgets)"
"0","library(leaflet.extras)"
"0","library(mapview)"
"0","library(raster)"
"0","proApicola <- readOGR(""geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp"","
"0","                  ""INEGI_DENUE_21012019"", verbose=FALSE)"
"0","#dim(proApicola@data)"
"0","x0 <- rep(""Producto apÃ­cola"",84)"
"0","#names(proApicola@data)"
"0","#head(proApicola@data)"
"0","proApicola@data <- cbind(proApicola@data, x0)"
"0","proMiel <- readOGR(""geodata/INEGI_DENUE_21012019_MIEL/INEGI_DENUE_21012019.shp"","
"0","                      ""INEGI_DENUE_21012019"", verbose=FALSE)"
"0","x1 <- c(3000055,427213,4552918,1662213,1587565,1963586,2565829,701212,979385,237899,1571621,1426730,3096733,450223,1751907,2666869,3636718,1685250,1934039,1322255,3666076,4282468,3518984)"
"0","ueMiel <- subset(proMiel, proMiel@data$codigo_act == 311221"
"0","                 | proMiel@data$codigo_act == 311999 "
"0","                 | proMiel@data$codigo_act == 321920"
"0","                 | proMiel@data$codigo_act == 325412"
"0","                 | proMiel@data$codigo_act == 325610"
"0","                 | proMiel@data$codigo_act == 431194"
"0","                 | proMiel@data$codigo_act == 431199"
"0","                 | proMiel@data$codigo_act == 461190"
"0","                 | proMiel@data$codigo_act == 461130 "
"0","                 | proMiel@data$codigo_act == 461140 "
"0","                 | proMiel@data$codigo_act == 461150"
"0","                 | proMiel@data$codigo_act == 464113"
"0","                 | proMiel@data$codigo_act == 493130 "
"0","                 | is.element(proMiel@data$id, x1)"
"0","                   )"
"0","x0 <- rep(""Venta de Miel"",length(ueMiel@data[,1]))"
"0","ueMiel@data <- cbind(ueMiel@data, x0)"
"0","ueMielApic <- raster::bind(ueMiel, proApicola)"
"0","quakes.df <- split(ueMielApic, ueMielApic$x0)"
"0","l <- leaflet() %>% addTiles() %>%"
"0","  addFullscreenControl()"
"0","names(quakes.df) %>%"
"0","  purrr::walk( function(df) {"
"0","    l <<- l %>%"
"0","      addMarkers(data=quakes.df[[df]],"
"0","                 group = df,"
"0","                 clusterOptions = markerClusterOptions(removeOutsideVisibleBounds = F),"
"0","                 "
"0","                 popup = paste0( ""<strong>id: </strong>"", quakes.df[[df]]$id, ""</br>"","
"0","                                 ""<strong>NOMBRE_ESTABLECIMIENTO: </strong>"", quakes.df[[df]]$nom_estab, ""</br>"","
"0","                                 ""<strong>TIPO: </strong>"", quakes.df[[df]]$nombre_act, ""</br>"","
"0","                                 ""<strong>MUNICIPIO: </strong>"", quakes.df[[df]]$municipio, ""</br>"","
"0","                                 ""<strong>ENTIDAD: </strong>"", quakes.df[[df]]$entidad"
"0","                                 )"
"0","                 )"
"0","  })"
"0","l %>% "
"0","   "
"0","  addMiniMap(toggleDisplay = TRUE, position = ""bottomleft"") %>%"
"0","  addMeasure("
"0","    position = ""bottomleft"","
"0","    primaryLengthUnit = ""meters"","
"0","    primaryAreaUnit = ""sqmeters"","
"0","    activeColor = ""#3D535D"","
"0","    completedColor = ""#7D4479"")%>%"
"0","  "
"0","    addEasyButton(easyButton("
"0","    icon=""fa-crosshairs"", "
"0","    title=""Locate Me"","
"0","    onClick=JS(""function(btn, map){ map.locate({setView: true}); }""))) %>%"
"0","  addLayersControl("
"0","    overlayGroups = names(quakes.df),"
"0","    options = layersControlOptions(collapsed = FALSE)"
"0","  ) %>% addMouseCoordinates()  %>%"
"0","addHomeButton(extent(proMiel), layer.name = ""i"",  position = ""topleft"") "
