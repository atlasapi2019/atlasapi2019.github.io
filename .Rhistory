| proMiel@data$codigo_act == 325412
| proMiel@data$codigo_act == 325610
| proMiel@data$codigo_act == 431194
| proMiel@data$codigo_act == 431199
| proMiel@data$codigo_act == 461190
| proMiel@data$codigo_act == 461130
| proMiel@data$codigo_act == 461140
| proMiel@data$codigo_act == 461150
| proMiel@data$codigo_act == 464113
| proMiel@data$codigo_act == 493130
| is.element(proMiel@data$id, x1)
)
x0 <- rep("Venta de Miel",length(ueMiel@data[,1]))
ueMiel@data <- cbind(ueMiel@data, x0)
ueMielApic <- raster::bind(ueMiel, proApicola)
library(sp)
library(rgdal)
library(leaflet)
library(htmltools)
library(htmlwidgets)
library(leaflet.extras)
library(mapview)
library(raster)
library(bitops)
library(rjson)
proApicola <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
#dim(proApicola@data)
x0 <- rep("Actividades apícolas",84)
#names(proApicola@data)
#head(proApicola@data)
proApicola@data <- cbind(proApicola@data, x0)
proMiel <- readOGR("geodata/INEGI_DENUE_21012019_MIEL/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
x1 <- c(3000055,427213,4552918,1662213,1587565,1963586,2565829,701212,979385,237899,1571621,
1426730,450223,1751907,2666869,3636718,1685250,1934039,1322255,3666076,4282468,3518984)
ueMiel <- subset(proMiel, proMiel@data$codigo_act == 311221
| proMiel@data$codigo_act == 311999
| proMiel@data$codigo_act == 321920
| proMiel@data$codigo_act == 325412
| proMiel@data$codigo_act == 325610
| proMiel@data$codigo_act == 431194
| proMiel@data$codigo_act == 431199
| proMiel@data$codigo_act == 461190
| proMiel@data$codigo_act == 461130
| proMiel@data$codigo_act == 461140
| proMiel@data$codigo_act == 461150
| proMiel@data$codigo_act == 464113
| proMiel@data$codigo_act == 493130
| is.element(proMiel@data$id, x1)
)
x0 <- rep("Venta de Miel",length(ueMiel@data[,1]))
ueMiel@data <- cbind(ueMiel@data, x0)
ueMielApic <- raster::bind(ueMiel, proApicola)
proApicola <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
#dim(proApicola@data)
x0 <- rep("Actividades apícolas",84)
#names(proApicola@data)
#head(proApicola@data)
proApicola@data <- cbind(proApicola@data, x0)
proMiel <- readOGR("geodata/INEGI_DENUE_21012019_MIEL/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
x1 <- c(3000055,427213,4552918,1662213,1587565,1963586,2565829,701212,979385,237899,1571621,
1426730,450223,1751907,2666869,3636718,1685250,1934039,1322255,3666076,4282468,3518984)
ueMiel <- subset(proMiel, (proMiel@data$codigo_act == 311221
| proMiel@data$codigo_act == 311999
| proMiel@data$codigo_act == 321920
| proMiel@data$codigo_act == 325412
| proMiel@data$codigo_act == 325610
| proMiel@data$codigo_act == 431194
| proMiel@data$codigo_act == 431199
| proMiel@data$codigo_act == 461190
| proMiel@data$codigo_act == 461130
| proMiel@data$codigo_act == 461140
| proMiel@data$codigo_act == 461150
| proMiel@data$codigo_act == 464113
| proMiel@data$codigo_act == 493130
| is.element(proMiel@data$id, x1))
& (proMiel@data$id != 2218442 &
proMiel@data$id != 3096733 &
proMiel@data$id != 3426513 &
proMiel@data$id != 3640449 &
proMiel@data$id != 4083614 &
proMiel@data$id != 4184935 &
proMiel@data$id != 4449017 &
proMiel@data$id != 4486570 &
proMiel@data$id != 450223
))
x0 <- rep("Venta de Miel",length(ueMiel@data[,1]))
ueMiel@data <- cbind(ueMiel@data, x0)
ueMielApic <- raster::bind(ueMiel, proApicola)
writeOGR(ueMielApic, "geodata", "puntos_miel", driver="ESRI Shapefile", encoding = 'UTF-8',
overwrite_layer=T)
ueMiel <- subset(proMiel, ((proMiel@data$codigo_act == 311221
| proMiel@data$codigo_act == 311999
| proMiel@data$codigo_act == 321920
| proMiel@data$codigo_act == 325412
| proMiel@data$codigo_act == 325610
| proMiel@data$codigo_act == 431194
| proMiel@data$codigo_act == 431199
| proMiel@data$codigo_act == 461190
| proMiel@data$codigo_act == 461130
| proMiel@data$codigo_act == 461140
| proMiel@data$codigo_act == 461150
| proMiel@data$codigo_act == 464113
| proMiel@data$codigo_act == 493130
| is.element(proMiel@data$id, x1))
& (proMiel@data$id != 2218442 &
proMiel@data$id != 3096733 &
proMiel@data$id != 3426513 &
proMiel@data$id != 3640449 &
proMiel@data$id != 4083614 &
proMiel@data$id != 4184935 &
proMiel@data$id != 4449017 &
proMiel@data$id != 4486570 &
proMiel@data$id != 450223
)))
x0 <- rep("Venta de Miel",length(ueMiel@data[,1]))
ueMiel@data <- cbind(ueMiel@data, x0)
ueMielApic <- raster::bind(ueMiel, proApicola)
writeOGR(ueMielApic, "geodata", "puntos_miel", driver="ESRI Shapefile", encoding = 'UTF-8',
overwrite_layer=T)
rmarkdown::render_site(encoding = "UTF-8")
proApicola <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
#dim(proApicola@data)
x0 <- rep("Actividades apícolas",84)
proApicola@data <- cbind(proApicola@data, x0)
library(sp)
library(rgdal)
library(leaflet)
library(htmltools)
library(htmlwidgets)
library(leaflet.extras)
library(mapview)
library(raster)
library(bitops)
library(rjson)
proApicola <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
#dim(proApicola@data)
x0 <- rep("Actividades apícolas",84)
#names(proApicola@data)
#head(proApicola@data)
proApicola@data <- cbind(proApicola@data, x0)
proApicola@data
proApicola <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
#dim(proApicola@data)
x0 <- rep("Actividades apícolas",84)
#names(proApicola@data)
#head(proApicola@data)
proApicola@data <- cbind(proApicola@data, x0)
proMiel <- readOGR("geodata/INEGI_DENUE_21012019_MIEL/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
x1 <- c(3000055,427213,4552918,1662213,1587565,1963586,2565829,701212,979385,237899,1571621,
1426730,450223,1751907,2666869,3636718,1685250,1934039,1322255,3666076,4282468,3518984)
ueMiel <- subset(proMiel, ((proMiel@data$codigo_act == 311221
| proMiel@data$codigo_act == 311999
| proMiel@data$codigo_act == 321920
| proMiel@data$codigo_act == 325412
| proMiel@data$codigo_act == 325610
| proMiel@data$codigo_act == 431194
| proMiel@data$codigo_act == 431199
| proMiel@data$codigo_act == 461190
| proMiel@data$codigo_act == 461130
| proMiel@data$codigo_act == 461140
| proMiel@data$codigo_act == 461150
| proMiel@data$codigo_act == 464113
| proMiel@data$codigo_act == 493130
| is.element(proMiel@data$id, x1))
& !(proMiel@data$id == 2218442 |
proMiel@data$id == 3096733 |
proMiel@data$id == 3426513 |
proMiel@data$id == 3640449 |
proMiel@data$id == 4083614 |
proMiel@data$id == 4184935 |
proMiel@data$id == 4449017 |
proMiel@data$id == 4486570 |
proMiel@data$id == 450223
)))
x0 <- rep("Venta de Miel",length(ueMiel@data[,1]))
ueMiel@data <- cbind(ueMiel@data, x0)
ueMielApic <- raster::bind(ueMiel, proApicola)
writeOGR(ueMielApic, "geodata", "puntos_miel", driver="ESRI Shapefile",
overwrite_layer=T)
writeOGR(ueMielApic, "geodata", "puntos_miel", driver="ESRI Shapefile",
overwrite_layer=T)
rmarkdown::render_site(encoding = 'UTF-8')
rmarkdown::render_site(encoding = "UTF-8")
getwd()
setwd("D:/Geografía/atlasapi2019.github.io")
rmarkdown::render_site(encoding="UTF-8")
rmarkdown::render_site(encoding = "UTF-8")
rmarkdown::render_site(encoding = "UTF-8")
library(sp)
library(rgdal)
library(leaflet)
library(htmltools)
library(htmlwidgets)
library(leaflet.extras)
library(mapview)
library(raster)
library(bitops)
library(rjson)
library(xts)
proApicola <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
View(proApicola)
proApicola@data
dim(proApicola@data)
proApicola@data[proApicola@data$450223,]
proApicola@data[proApicola@data$id == 450223,]
proMiel <- readOGR("geodata/INEGI_DENUE_21012019_MIEL/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
proMiel@data[proApicola@data$id == 450223,]
x1 <- c(3000055,427213,4552918,1662213,1587565,1963586,2565829,701212,979385,237899,1571621,
1426730,450223,1751907,2666869,3636718,1685250,1934039,1322255,3666076,4282468,3518984)
proMiel@data[proMiel@data$id == 450223,]
dim(proApicola@data)
View(proApicola)
proApicola <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE, encoding = "UTF-8")
dim(proApicola@data)
proMiel@data[proMiel@data$id == 450223,]
proApicola@data$id
salen1 <- c(3913258,2218442,3096733,3640449,4083614,4184935,4449017,4486570)
proApicola <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
dim(proApicola@data)
proApic <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
salen1 <- c(3913258,2218442,3096733,3640449,4083614,4184935,4449017,4486570)
dim(proApic@data)
proApicola <- subset(proApic, !(is.element(proApic@data$id, salen1)))
dim(proApicola@data)
x0 <- rep("Actividades apícolas", dim(proApicola@data))
x0 <- rep("Actividades apícolas", dim(proApicola@data[1]))
x0 <- rep("Actividades apícolas", dim(proApicola@data)[1])
x0
names(proApicola@data)
head(proApicola@data)
#head(proApicola@data)
proApicola@data <- cbind(proApicola@data, x0)
#head(proApicola@data)
proApicola@data <- cbind(proApicola@data, x0)
head(proApicola@data)
proApic <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
salen1 <- c(3913258,2218442,3096733,3640449,4083614,4184935,4449017,4486570)
proApicola <- subset(proApic, !(is.element(proApic@data$id, salen1)))
x0 <- rep("Actividades apícolas", dim(proApicola@data)[1])
#head(proApicola@data)
proApicola@data <- cbind(proApicola@data, x0)
head(proApicola@data)
proApicola@data$id
proApic <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
salen1 <- c(3913258,2218442,3096733,3640449,4083614,4184935,4449017,4486570)
proApicola <- subset(proApic, !(is.element(proApic@data$id, salen1)))
x0 <- rep("Actividades apícolas", dim(proApicola@data)[1])
dim(proApicola@data)
library(sp)
library(rgdal)
library(leaflet)
library(htmltools)
library(htmlwidgets)
library(leaflet.extras)
library(mapview)
library(raster)
library(bitops)
library(rjson)
library(xts)
proApic <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
salen1 <- c(3913258,2218442,3096733,3640449,4083614,4184935,4449017,4486570)
proApicola <- subset(proApic, !(is.element(proApic@data$id, salen1)))
x0 <- rep("Actividades apícolas", dim(proApicola@data)[1])
dim(proApicola@data)
proApicola@data <- cbind(proApicola@data, x0)
proApicola@data$id
names(proApicola@data)
dim(proApicola@data)
proApic <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
dim(proApic@data)
salen1 <- c(3913258,2218442,3096733,3640449,4083614,4184935,4449017,4486570)
proApicola <- subset(proApic, !(is.element(proApic@data$id, salen1)))
x0 <- rep("Actividades apícolas", dim(proApicola@data)[1])
names(proApicola@data)
dim(proApicola@data)
proApicola@data <- cbind(proApicola@data, x0)
proApicola@data$id
names(proApicola@data)
dim(proApicola@data)
proApic <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
dim(proApic@data)
salen1 <- c(3913258,2218442,3096733,3640449,4083614,4184935,4449017,4486570)
proApicola <- subset(proApic, !(is.element(proApic@data$id, salen1)))
x0 <- rep("Actividades apícolas", dim(proApicola@data)[1])
names(proApicola@data)
dim(proApicola@data)
proApicola@data <- cbind(proApicola@data, x0)
proApicola@data$id
names(proApicola@data)
dim(proApicola@data)
proMiel <- readOGR("geodata/INEGI_DENUE_21012019_MIEL/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
dim(proMiel@data)
proMiel <- readOGR("geodata/INEGI_DENUE_21012019_MIEL/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
dim(proMiel@data)
entran <- c(1662213,2565829,1426730,1751907,4282468,3518984)
salen2 <- c(1812561,3163906,3164094,2603960,1764794,555821,2477068,2465731,452114,4552918,1573930,3946536,
3426513,450223,485578,1436249,6743142,4108619)
cod_scian <- c(311221,311999,321920,325412,325610,431194,431199,461190,461130,461140,461150,464113,493130)
ueMiel <- subset(proMiel, (is.element(proMiel@data$codigo_act, cod_scian)
| is.element(proMiel@data$id, entran)) & !(is.element(proMiel@data$id, salen)))
x0 <- rep("Venta de Miel", dim(ueMiel@data[1]))
ueMiel@data <- cbind(ueMiel@data, x0)
names(ueMiel@data)
dim(ueMiel@data)
proMiel <- readOGR("geodata/INEGI_DENUE_21012019_MIEL/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
dim(proMiel@data)
entran <- c(1662213,2565829,1426730,1751907,4282468,3518984)
salen2 <- c(1812561,3163906,3164094,2603960,1764794,555821,2477068,2465731,452114,4552918,1573930,3946536,
3426513,450223,485578,1436249,6743142,4108619)
cod_scian <- c(311221,311999,321920,325412,325610,431194,431199,461190,461130,461140,461150,464113,493130)
ueMiel <- subset(proMiel, (is.element(proMiel@data$codigo_act, cod_scian)
| is.element(proMiel@data$id, entran)) & !(is.element(proMiel@data$id, salen2)))
x0 <- rep("Venta de Miel", dim(ueMiel@data[1]))
ueMiel@data <- cbind(ueMiel@data, x0)
names(ueMiel@data)
dim(ueMiel@data)
rep("Venta de Miel", dim(ueMiel@data[1]))
dim(proMiel@data)
proMiel <- readOGR("geodata/INEGI_DENUE_21012019_MIEL/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
dim(proMiel@data)
entran <- c(1662213,2565829,1426730,1751907,4282468,3518984)
salen2 <- c(1812561,3163906,3164094,2603960,1764794,555821,2477068,2465731,452114,4552918,1573930,3946536,
3426513,450223,485578,1436249,6743142,4108619)
cod_scian <- c(311221,311999,321920,325412,325610,431194,431199,461190,461130,461140,461150,464113,493130)
ueMiel <- subset(proMiel, (is.element(proMiel@data$codigo_act, cod_scian)
| is.element(proMiel@data$id, entran)) & !(is.element(proMiel@data$id, salen2)))
x0 <- rep("Venta de Miel", dim(ueMiel@data)[1])
ueMiel@data$x0 <- cbind(ueMiel@data, x0)
names(ueMiel@data)
dim(ueMiel@data)
otrApic <- readOGR("geodata/INEGI_DENUE_01082019_OTRAPIC/INEGI_DENUE_01082019.shp",
"INEGI_DENUE_01082019", verbose=FALSE)
dim(otrApic@data)
x0 <- rep("Actividades apícolas", dim(otrApic@data)[1])
otrApic@data$x0 <- cbind(otrApic@data, x0)
names(otrApic@data)
dim(otrApic@data)
ueMielApic <- raster::bind(ueMiel, proApicola, otrApic)
proApic <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
salen1 <- c(3913258,2218442,3096733,3640449,4083614,4184935,4449017,4486570)
proApicola <- subset(proApic, !(is.element(proApic@data$id, salen1)))
x0 <- rep("Actividades apícolas", dim(proApicola@data)[1])
proApicola@data <- cbind(proApicola@data, x0)
proMiel <- readOGR("geodata/INEGI_DENUE_21012019_MIEL/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
entran <- c(1662213,2565829,1426730,1751907,4282468,3518984)
salen2 <- c(1812561,3163906,3164094,2603960,1764794,555821,2477068,2465731,452114,4552918,1573930,3946536,
3426513,450223,485578,1436249,6743142,4108619)
cod_scian <- c(311221,311999,321920,325412,325610,431194,431199,461190,461130,461140,461150,464113,493130)
ueMiel <- subset(proMiel, (is.element(proMiel@data$codigo_act, cod_scian)
| is.element(proMiel@data$id, entran)) & !(is.element(proMiel@data$id, salen2)))
x0 <- rep("Venta de Miel", dim(ueMiel@data)[1])
ueMiel@data$x0 <- cbind(ueMiel@data, x0)
otrApic <- readOGR("geodata/INEGI_DENUE_01082019_OTRAPIC/INEGI_DENUE_01082019.shp",
"INEGI_DENUE_01082019", verbose=FALSE)
dim(otrApic@data)
x0 <- rep("Actividades apícolas", dim(otrApic@data)[1])
otrApic@data$x0 <- cbind(otrApic@data, x0)
ueMielApic <- raster::bind(ueMiel, proApicola, otrApic)
ueMielApic <- raster::bind(ueMiel, proApicola)
proApic <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
salen1 <- c(3913258,2218442,3096733,3640449,4083614,4184935,4449017,4486570)
proApicola <- subset(proApic, !(is.element(proApic@data$id, salen1)))
x0 <- rep("Actividades apícolas", dim(proApicola@data)[1])
proApicola@data <- cbind(proApicola@data, x0)
proMiel <- readOGR("geodata/INEGI_DENUE_21012019_MIEL/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
entran <- c(1662213,2565829,1426730,1751907,4282468,3518984)
salen2 <- c(1812561,3163906,3164094,2603960,1764794,555821,2477068,2465731,452114,4552918,1573930,3946536,
3426513,450223,485578,1436249,6743142,4108619)
cod_scian <- c(311221,311999,321920,325412,325610,431194,431199,461190,461130,461140,461150,464113,493130)
ueMiel <- subset(proMiel, (is.element(proMiel@data$codigo_act, cod_scian)
| is.element(proMiel@data$id, entran)) & !(is.element(proMiel@data$id, salen2)))
x0 <- rep("Venta de Miel", dim(ueMiel@data)[1])
ueMiel@data$x0 <- cbind(ueMiel@data, x0)
ueMielApic <- raster::bind(ueMiel, proApicola)
library(sp)
library(rgdal)
library(leaflet)
library(htmltools)
library(htmlwidgets)
library(leaflet.extras)
library(mapview)
library(raster)
library(bitops)
library(rjson)
library(xts)
proApic <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
salen1 <- c(3913258,2218442,3096733,3640449,4083614,4184935,4449017,4486570)
proApicola <- subset(proApic, !(is.element(proApic@data$id, salen1)))
x0 <- rep("Actividades apícolas", dim(proApicola@data)[1])
proApicola@data <- cbind(proApicola@data, x0)
proMiel <- readOGR("geodata/INEGI_DENUE_21012019_MIEL/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
entran <- c(1662213,2565829,1426730,1751907,4282468,3518984)
salen2 <- c(1812561,3163906,3164094,2603960,1764794,555821,2477068,2465731,452114,4552918,1573930,3946536,
3426513,450223,485578,1436249,6743142,4108619)
cod_scian <- c(311221,311999,321920,325412,325610,431194,431199,461190,461130,461140,461150,464113,493130)
ueMiel <- subset(proMiel, ((is.element(proMiel@data$codigo_act, cod_scian)
| is.element(proMiel@data$id, entran)) & !(is.element(proMiel@data$id, salen2))))
x0 <- rep("Venta de Miel", dim(ueMiel@data)[1])
ueMiel@data$x0 <- cbind(ueMiel@data, x0)
otrApic <- readOGR("geodata/INEGI_DENUE_01082019_OTRAPIC/INEGI_DENUE_01082019.shp",
"INEGI_DENUE_01082019", verbose=FALSE)
x0 <- rep("Actividades apícolas", dim(otrApic@data)[1])
otrApic@data$x0 <- cbind(otrApic@data, x0)
ueMielApic <- raster::bind(ueMiel, proApicola)
dim(otrApic@data)[1]
proApic <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
salen1 <- c(3913258,2218442,3096733,3640449,4083614,4184935,4449017,4486570)
proApicola <- subset(proApic, !(is.element(proApic@data$id, salen1)))
x0 <- rep("Actividades apícolas", dim(proApicola@data)[1])
proApicola@data <- cbind(proApicola@data, x0)
proMiel <- readOGR("geodata/INEGI_DENUE_21012019_MIEL/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
entran <- c(1662213,2565829,1426730,1751907,4282468,3518984)
salen2 <- c(1812561,3163906,3164094,2603960,1764794,555821,2477068,2465731,452114,4552918,1573930,3946536,
3426513,450223,485578,1436249,6743142,4108619)
cod_scian <- c(311221,311999,321920,325412,325610,431194,431199,461190,461130,461140,461150,464113,493130)
ueMiel <- subset(proMiel, ((is.element(proMiel@data$codigo_act, cod_scian)
| is.element(proMiel@data$id, entran)) & !(is.element(proMiel@data$id, salen2))))
ueMiel@data$x0 <- rep("Venta de Miel", dim(ueMiel@data)[1])
ueMielApic <- raster::bind(ueMiel, proApicola)
proApic <- readOGR("geodata/INEGI_DENUE_21012019_APICOLA/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
salen1 <- c(3913258,2218442,3096733,3640449,4083614,4184935,4449017,4486570)
proApicola <- subset(proApic, !(is.element(proApic@data$id, salen1)))
x0 <- rep("Actividades apícolas", dim(proApicola@data)[1])
proApicola@data <- cbind(proApicola@data, x0)
proMiel <- readOGR("geodata/INEGI_DENUE_21012019_MIEL/INEGI_DENUE_21012019.shp",
"INEGI_DENUE_21012019", verbose=FALSE)
entran <- c(1662213,2565829,1426730,1751907,4282468,3518984)
salen2 <- c(1812561,3163906,3164094,2603960,1764794,555821,2477068,2465731,452114,4552918,1573930,3946536,
3426513,450223,485578,1436249,6743142,4108619)
cod_scian <- c(311221,311999,321920,325412,325610,431194,431199,461190,461130,461140,461150,464113,493130)
ueMiel <- subset(proMiel, ((is.element(proMiel@data$codigo_act, cod_scian)
| is.element(proMiel@data$id, entran)) & !(is.element(proMiel@data$id, salen2))))
ueMiel@data$x0 <- rep("Venta de Miel", dim(ueMiel@data)[1])
otrApic <- readOGR("geodata/INEGI_DENUE_01082019_OTRAPIC/INEGI_DENUE_01082019.shp",
"INEGI_DENUE_01082019", verbose=FALSE)
otrApic@data$x0 <- rep("Actividades apícolas", dim(otrApic@data)[1])
ueMielApic <- raster::bind(ueMiel, proApicola)
ueMielApic <- raster::bind(ueMielApic, otrApic)
dim(ueMielApic)
dim(ueMiel)
dim(proApicola)
dim(otrApic)
855+76+23
ueMielApic$x0
quakes.df <- split(ueMielApic, ueMielApic$x0)
l <- leaflet() %>% addTiles() %>%
addFullscreenControl()
names(quakes.df) %>%
purrr::walk( function(df) {
l <<- l %>%
addMarkers(data=quakes.df[[df]],
group = df,
clusterOptions = markerClusterOptions(removeOutsideVisibleBounds = F),
popup = paste0( "<strong>id: </strong>", quakes.df[[df]]$id, "</br>",
"<strong>NOMBRE_ESTABLECIMIENTO: </strong>", quakes.df[[df]]$nom_estab, "</br>",
"<strong>TIPO: </strong>", quakes.df[[df]]$nombre_act, "</br>",
"<strong>MUNICIPIO: </strong>", quakes.df[[df]]$municipio, "</br>",
"<strong>ENTIDAD: </strong>", quakes.df[[df]]$entidad
)
)
})
l %>%
addMiniMap(toggleDisplay = TRUE, position = "bottomleft") %>%
addMeasure(
position = "bottomleft",
primaryLengthUnit = "meters",
primaryAreaUnit = "sqmeters",
activeColor = "#3D535D",
completedColor = "#7D4479")%>%
addEasyButton(easyButton(
icon="fa-crosshairs",
title="Locate Me",
onClick=JS("function(btn, map){ map.locate({setView: true}); }"))) %>%
addLayersControl(
overlayGroups = names(quakes.df),
options = layersControlOptions(collapsed = FALSE)
) %>% addMouseCoordinates()  %>%
addHomeButton(extent(proMiel), layer.name = "i",  position = "topleft")
writeOGR(ueMielApic, "geodata/puntos_miel.shp", "puntos_miel", "ESRI Shapefile", encoding = "UTF-8")
write.csv(ueMielApic@data,"geodata/puntos_miel.csv")
rmarkdown::render_site(encoding="UTF-8")
